<!DOCTYPE html>
<html lang="en">
<head>
        <title>Kevins Notes - tutorial</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link href="/None" type="application/atom+xml" rel="alternate" title="Kevins Notes ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->

</head>

<body>
        
        

            <header>
                <h1><a href="" id="site-title">Kevins Notes </a> : <a href="/pelican_org_mode.html" id="page-title">Pelican and Org Mode</a></h1>
<time datetime="2018-09-23T00:00:00-05:00">Sun 23 September 2018</time>            </header>

            <article>
                <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9f57639">1. Introduction</a></li>
<li><a href="#org2a72335">2. Initial setup</a></li>
<li><a href="#orgeb3493e">3. Using org-mode</a>
<ul>
<li><a href="#orgae336b8">3.1. Org Reader Setup</a></li>
<li><a href="#orgc34144d">3.2. Org Python Reader Setup</a></li>
<li><a href="#org23db121">3.3. Org Pandoc Reader setup</a></li>
</ul>
</li>
<li><a href="#org6898a3a">4. Conclusion and Other Thoughts</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9f57639" class="outline-2">
<h2 id="org9f57639"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
One of the first things you need to do after deciding to start a blog, is setting one up. So I figured it would be appropriate that the first post of my blog is about how I set this up.
</p>

<p>
My requirements are fairly simple:
</p>
<ul class="org-ul">
<li>create a static site</li>
<li>be able to write content using Emacs' <code>org-mode</code></li>
<li>preferably written in a language I know</li>
</ul>

<p>
This led me down a path of looking at and trying a few different static site generators. 
</p>

<p>
Each static site generator essentially works the same. There is a CLI which allows you to:
</p>
<ul class="org-ul">
<li>scaffold out the site</li>
<li>create content in a folder in some sort of text format, e.g. markdown, rest, org, etc</li>
<li>generate HTML from the content</li>
<li>run a local server to preview the website</li>
</ul>

<p>
After trying out a few different ones, I decided to use <a href="http://docs.getpelican.com/en/stable/">Pelican</a>. It seems to be the most popular and actively maintained one written in Python. It's even used by <a href="https://kernel.org">kernel.org</a>!
</p>
</div>
</div>

<div id="outline-container-org2a72335" class="outline-2">
<h2 id="org2a72335"><span class="section-number-2">2</span> Initial setup</h2>
<div class="outline-text-2" id="text-2">
<p>
First, install <code>pelican</code> (I use <code>pipenv</code> personally).
</p>
<div class="org-src-container">
<pre class="src src-python">pipenv install pelican
pipenv shell
</pre>
</div>

<p>
Create the folder where you want the website and initialize the site:
</p>
<div class="org-src-container">
<pre class="src src-python">pelican-quickstart
</pre>
</div>
<p>
This scaffolds out the files and directories needed.
</p>

<p>
Create a new post in the <code>content</code> folder.
</p>

<p>
Generate the output:
</p>
<div class="org-src-container">
<pre class="src src-python">pelican content
</pre>
</div>
<p>
This generates the output into the <code>output</code> folder.
</p>

<p>
Preview the content:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="font-weight: bold;">cd</span> output
python -m pelican.server
</pre>
</div>

<p>
If you select "yes" during <code>pelican-quickstart</code>, a <code>Makefile</code> is created. This allows you to use <code>make</code> to automate some of the pelican tasks such as generating the output, publishing, running the server, etc.
</p>

<p>
Generate and preview the content with <code>make</code> instead of <code>pelican</code>:
</p>
<div class="org-src-container">
<pre class="src src-sh">make html
make serve
</pre>
</div>

<p>
It can also do some other cool stuff like generating the production version of the website, use GitHub's <code>gh-pages</code> branch, etc. See how to use it from the <a href="http://docs.getpelican.com/en/stable/publish.html?highlight=makefile#make">official docs</a>.
</p>
</div>
</div>

<div id="outline-container-orgeb3493e" class="outline-2">
<h2 id="orgeb3493e"><span class="section-number-2">3</span> Using org-mode</h2>
<div class="outline-text-2" id="text-3">
<p>
In order to use <code>org-mode</code>, you need to install a plugin.
</p>

<p>
To install a plugin, clone the <a href="https://github.com/getpelican/pelican-plugins">pelican-plugins</a> repo:
</p>
<div class="org-src-container">
<pre class="src src-sh">git clone --recursive https://github.com/getpelican/pelican-plugins
</pre>
</div>

<p>
Add the path and the plugin to your <code>pelicanconf.py</code>:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="font-weight: bold; font-style: italic;">PLUGIN_PATHS</span> = [<span style="font-style: italic;">'path/to/pelican-plugins'</span>]
<span style="font-weight: bold; font-style: italic;">PLUGINS</span> = [<span style="font-style: italic;">'org_reader'</span>]
</pre>
</div>

<p>
There are three different plugins to choose from:
</p>
<ol class="org-ol">
<li><code>org_reader</code></li>
<li><code>org_python_reader</code></li>
<li><code>org_pandoc_reader</code></li>
</ol>

<p>
Each plugin uses a different mechanism to convert the <code>.org</code> files to HTML. <code>org_reader</code> uses Emacs, <code>org_python_reader</code> uses the <a href="https://github.com/paetzke/orgco">orgco</a> Python library, and <code>org_pandoc_reader</code> uses (you guessed it&#x2026;) <a href="https://pandoc.org">Pandoc</a>.
</p>

<p>
It seems that <code>org_python_reader</code> is an 'update' for <code>org_reader</code>. <code>org_pandoc_reader</code> on the other hand looks to be based off of another plugin, <code>pandoc_reader</code>. 
</p>
</div>

<div id="outline-container-orgae336b8" class="outline-3">
<h3 id="orgae336b8"><span class="section-number-3">3.1</span> Org Reader Setup</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Add the following to <code>pelicanconf.py</code>:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="font-weight: bold; font-style: italic;">PLUGINS</span> = [<span style="font-style: italic;">'org_reader'</span>]
<span style="font-weight: bold; font-style: italic;">ORG_READER_EMACS_LOCATION</span> = <span style="font-style: italic;">'/usr/bin/emacs'</span>
</pre>
</div>

<p>
In order to define the metadata for Pelican, put the following in the <code>org</code> file's header:
</p>
<div class="org-src-container">
<pre class="src src-org">#+TITLE: <span style="font-weight: bold;">The Title Of This BlogPost</span>
#+DATE: 2001-01-01
<span style="font-weight: bold; font-style: italic;">#+CATEGORY: blog-category</span>
#+AUTHOR: My Name
<span style="font-weight: bold; font-style: italic;">#+PROPERTY: LANGUAGE en</span>
<span style="font-weight: bold; font-style: italic;">#+PROPERTY: SUMMARY hello, this is the description</span>
<span style="font-weight: bold; font-style: italic;">#+PROPERTY: SLUG test_slug</span>
<span style="font-weight: bold; font-style: italic;">#+PROPERTY: MODIFIED [2015-12-29 Di]</span>
<span style="font-weight: bold; font-style: italic;">#+PROPERTY: TAGS my, first, tags</span>
<span style="font-weight: bold; font-style: italic;">#+PROPERTY: SAVE_AS alternative_filename.html</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc34144d" class="outline-3">
<h3 id="orgc34144d"><span class="section-number-3">3.2</span> Org Python Reader Setup</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Add the following to <code>pelicanconf.py</code>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="font-weight: bold; font-style: italic;">PLUGINS</span> = [<span style="font-style: italic;">'org_python_reader'</span>]
<span style="font-weight: bold; font-style: italic;">ORGMODE</span> = {
        <span style="font-style: italic;">'code_highlight'</span>: <span style="font-weight: bold; text-decoration: underline;">True</span>,
}
</pre>
</div>

<p>
It will not work unless you add <code>ORGMODE</code>. The only option currently is <code>code_highlight</code> which can be set to <code>True</code> or <code>False</code>. This tells the plugin whether to add syntax highlighting to <code>SRC</code> blocks.
</p>

<p>
This uses the same <code>org</code> headers as <code>org_reader</code>.
</p>

<p>
One thing to note is that this plugin will always print out line numbers in <code>SRC</code> blocks due to its dependency on <a href="https://github.com/paetzke/orgco">orgco</a>.
</p>
</div>
</div>

<div id="outline-container-org23db121" class="outline-3">
<h3 id="org23db121"><span class="section-number-3">3.3</span> Org Pandoc Reader setup</h3>
<div class="outline-text-3" id="text-3-3">
<p>
In order to use <a href="https://github.com/jo-tham/org_pandoc_reader/tree/bf06b72c1bfe1831f3e4c872f6c833af0bec19bf">org<sub>pandoc</sub><sub>reader</sub></a>, you need to clone it as the <code>pelican-plugins</code> repo only links to it, it doesn't include it directly:
</p>
<div class="org-src-container">
<pre class="src src-sh">git clone https://github.com/jo-tham/org_pandoc_reader.git
</pre>
</div>

<p>
Add the following to <code>pelicanconf.py</code>
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="font-weight: bold; font-style: italic;">PLUGINS</span> = [<span style="font-style: italic;">'org_pandoc_reader'</span>]
<span style="font-weight: bold; font-style: italic;">ORG_PANDOC_ARGS</span> = [<span style="font-style: italic;">'--standalone'</span>,]
</pre>
</div>

<p>
Without <code>--standalone</code>, the <code>SRC</code> blocks don't have syntax highlighting. Source code blocks are also underlined for me in some themes for some reason. I might take a look at why that is happening later.
</p>

<p>
<code>org_pandoc_reader</code> also does not use <code>PROPERTY</code> to generate metadata, you just use the name of the setting directly, e.g.:
</p>
<div class="org-src-container">
<pre class="src src-org">#+TITLE: <span style="font-weight: bold;">The Title Of This BlogPost</span>
#+DATE: 2001-01-01
<span style="font-weight: bold; font-style: italic;">#+CATEGORY: blog-category</span>
#+AUTHOR: My Name
<span style="font-weight: bold; font-style: italic;">#+LANGUAGE: en</span>
<span style="font-weight: bold; font-style: italic;">#+SUMMARY: hello, this is the description</span>
<span style="font-weight: bold; font-style: italic;">#+SLUG: test_slug</span>
<span style="font-weight: bold; font-style: italic;">#+MODIFIED: [2015-12-29 Di]</span>
<span style="font-weight: bold; font-style: italic;">#+TAGS: my, first, tags</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6898a3a" class="outline-2">
<h2 id="org6898a3a"><span class="section-number-2">4</span> Conclusion and Other Thoughts</h2>
<div class="outline-text-2" id="text-4">
<p>
Using Pelican and org-mode is pretty nice once its set up. Although I did run into some troubles initially, and I was able to fairly easily fix the issues I was having. I even submitted my first issues and PR's to an open source project that wasn't my own or a friends!
</p>

<ul class="org-ul">
<li><a href="https://github.com/getpelican/pelican-plugins/pull/1066">Fix the processing of org files with SRC blocks.</a></li>
<li><a href="https://github.com/getpelican/pelican-plugins/pull/1064">Fix loading of org<sub>reader</sub> plugins.</a></li>
</ul>

<p>
I am using the <code>org_reader</code> plugin right now, but I'm not sure if I'll stick with it, <code>pandoc</code> have look pretty nice too.
</p>

<p>
In my testing of different static site generators, I tried <a href="https://gohugo.io/">Hugo</a>, written in go, along with the <a href="https://ox-hugo.scripter.co/">ox-hugo</a> package for Emacs. I really liked it as <code>ox-hugo</code> gives you the ability to have several posts/pages/etc in a single org file. I would ultimately like to set something like that up for Pelican, but that's a task for a later day.
</p>
</div>
</div>
            </article>

        <footer>
            <nav>
                <ul>
                    <li>:: <a href="/tags.html">Tags</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Th√®me mnmlist</a></p>
        </footer>

</body>
</html>